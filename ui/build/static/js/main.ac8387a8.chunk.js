(this.webpackJsonpui=this.webpackJsonpui||[]).push([[0],{111:function(e,t){},115:function(e,t,n){},116:function(e,t,n){},128:function(e,t,n){},129:function(e,t,n){},145:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),s=n(35),l=n(74),c=(n(81),n(5)),o=n(8),i=n(4),u=n(7),m=n(6),d=(n(82),n(83),n(62)),h=n.n(d),p=n(16),f=n(150),g=n(147),b=n(148),E=n(149),v=n(26),y=n(12),k=n(0),w=n(63),N=n.n(w),S=(n(115),function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).show=function(){a.setState({show:!0})},a.hide=function(){a.setState({show:!1})},a.state={nodes:[],msgs:[],usrs:[],numAuthNodes:0,numOtherNodes:0,show:!1},a.initiateRegister=a.initiateRegister.bind(Object(i.a)(a)),a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.socket,a=t.savedState;null!==a&&this.setState(a),n.emit("DashboardUpdate"),n.on("DashboardUpdate",(function(t){console.log(t),e.parseData(t)})),this.scrollToBottom()}},{key:"componentDidUpdate",value:function(){this.scrollToBottom()}},{key:"componentWillUnmount",value:function(){(0,this.props.liftState)(this.state)}},{key:"parseData",value:function(e){var t=this;if(this.setState((function(t){return{msgs:[].concat(Object(p.a)(t.msgs),["".concat(e.action)])}})),e.clients){var n=0;e.clients.map((function(e){"auth"===e.database?t.setState({numAuthNodes:e.number}):n+=1})),this.setState({nodes:e.clients,numOtherNodes:n})}e.users&&this.setState({usrs:e.users})}},{key:"scrollToBottom",value:function(){this.el.scrollIntoView({behavior:"smooth"})}},{key:"initiateRegister",value:function(){var e=this.props.registerHandler,t=document.getElementById("username").value,n=document.getElementById("fullname").value;""===t||""===n?document.getElementById("send-arrow").style.color="red":e(t,n)}},{key:"render",value:function(){var e=this,t=this.state,n=t.show,a=t.nodes,s=t.msgs,l=t.usrs,c=t.numAuthNodes,o=t.numOtherNodes,i=this.props,u=i.threshold,m=i.total;return r.a.createElement("div",{style:{height:"100%"}},r.a.createElement(f.a,{className:"register-btn",variant:"dark",onClick:this.show},"Register a new user"),r.a.createElement(N.a,{className:"username-modal",containerClassName:"modal-container",closeOnOuterClick:!0,show:n,onClose:this.hide},r.a.createElement("h3",{className:"modal-title"},"Register a New User"),r.a.createElement("div",{className:"modal-background"},r.a.createElement("div",{className:"input-boxes"},r.a.createElement("input",{id:"username",placeholder:"username"}),r.a.createElement("input",{id:"fullname",placeholder:"fullname"})),r.a.createElement("div",{id:"send-arrow",className:"icon-holder"},r.a.createElement(y.a,{className:"clickable",onClick:this.initiateRegister,size:32})))),r.a.createElement("h3",{className:"section_heading"},"Nodes Online"),r.a.createElement(x,{active:a,threshold:u,numAuthNodes:c,numOtherNodes:o}),r.a.createElement("br",null),r.a.createElement(g.a,{fluid:!0,style:{height:"40%",width:"95%"}},r.a.createElement(b.a,{style:{height:"5%",width:"auto"}},r.a.createElement("h3",{className:"section_heading",style:{width:"45%",marginLeft:"0px"}},"Output Log"),r.a.createElement("h3",{className:"section_heading",style:{width:"45%"}},"Current Users")),r.a.createElement(b.a,{style:{height:"90%",width:"auto"}},r.a.createElement("div",{className:"col log overflow-auto"},s&&s.map((function(e,t){return r.a.createElement("p",{key:t},e)})),r.a.createElement("div",{ref:function(t){e.el=t}})),r.a.createElement("div",{className:"col",style:{margin:"0px"}},r.a.createElement(g.a,{fluid:!0,style:{height:"100%",width:"100%",borderStyle:"none"}},r.a.createElement(b.a,{style:{height:"100%",width:"auto"}},l&&l.map((function(e,t){return r.a.createElement(O,{key:t,usr:e.user,num:e.num_shares,threshold:u,total:m})}))))))),r.a.createElement("br",null))}}]),n}(r.a.Component));function O(e){var t=e.total,n=e.num,a=e.usr,s=e.threshold;return r.a.createElement(E.a,null,r.a.createElement(g.a,null,t-n>0&&Array(t-n).fill(" ").map((function(e,t){return r.a.createElement(b.a,{key:t,className:"empty",style:{height:"50px",width:"50px",margin:"0 auto 0 auto"}})})),Array(Math.min(t,n)).fill(" ").map((function(e,t){return r.a.createElement(b.a,{key:t,className:n>=s?"authorized":"unauthorized",style:{height:"50px",width:"50px",margin:"0 auto 0 auto"}})}))),r.a.createElement("p",null,a," ","(",n,"/",s,")"))}function x(e){return r.a.createElement(g.a,{fluid:!0,className:e.numOtherNodes<e.threshold?"unauthorized":"",style:{width:"95%"}},r.a.createElement(b.a,{style:{width:"auto"}},r.a.createElement(j,{icon:r.a.createElement(v.b,null),label:"Auth Node",number:e.numAuthNodes})),r.a.createElement(b.a,{style:{width:"auto"}},e.active&&e.active.map((function(e,t){switch(e.database){case"face":return r.a.createElement(j,{key:t,icon:r.a.createElement(v.a,null),label:"Face ID",number:e.number});case"web":return r.a.createElement(j,{key:t,icon:r.a.createElement(y.c,null),label:"Web ID",number:e.number});case"other":return r.a.createElement(j,{key:t,icon:r.a.createElement(y.d,null),label:"Unknown Node",number:e.number});case"voice":return r.a.createElement(j,{key:t,icon:r.a.createElement(v.c,null),label:"Speech ID",number:e.number});case"qr":return r.a.createElement(j,{key:t,icon:r.a.createElement(y.b,null),label:"QR Scan ID",number:e.number})}}))))}function j(e){return r.a.createElement(k.b.Provider,{value:{size:"5em"}},r.a.createElement(E.a,null,e.icon,r.a.createElement("h3",null,e.label," (x",e.number,")")))}S.defaultProps=null;n(116);var C=n(25),R=new C.a,B="",I=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(e){var a;Object(c.a)(this,n),(a=t.call(this,e)).updateCookie=function(e){e.preventDefault();var t=document.getElementById("i_username").value;R.set("username",t),a.togglescreen()};var r=a.props.register;return a.state={opened:r},a.togglescreen=a.togglescreen.bind(Object(i.a)(a)),a.enter=a.enter.bind(Object(i.a)(a)),a.styleBtnPress=a.styleBtnPress.bind(Object(i.a)(a)),a.clr=a.clr.bind(Object(i.a)(a)),a.checkComplete=a.checkComplete.bind(Object(i.a)(a)),a.updateCookie=a.updateCookie.bind(Object(i.a)(a)),a}return Object(o.a)(n,[{key:"togglescreen",value:function(){var e=this.state.opened;this.setState({opened:!e})}},{key:"clr",value:function(){var e=document.getElementById("clr");return this.styleBtnPress(e),document.getElementById("entry").innerHTML="",B="",1}},{key:"WelcomePage",value:function(){return r.a.createElement("div",{id:"scr_1"},r.a.createElement("div",{className:"centered",id:"welcome"},r.a.createElement("div",{className:"window"},r.a.createElement("div",{className:"w_header"},r.a.createElement("h1",null,"Howdy!")),r.a.createElement("div",{className:"w_content"},r.a.createElement("h2",null,"Please enter your username:"),r.a.createElement("form",{onSubmit:this.updateCookie},r.a.createElement("input",{id:"i_username",type:"text",name:"username",autoFocus:!0}))))))}},{key:"checkComplete",value:function(){var e=this.props.register;if(B.length>=6){var t=new XMLHttpRequest,n="https://".concat(window.location.hostname,":3001/auth");t.open("POST",n,!0),t.setRequestHeader("Content-type","application/json;charset=UTF-8");var a=e?1:0;t.send(JSON.stringify({username:a?"":R.get("username"),pw:B,register:a})),B="",this.clr()}}},{key:"styleBtnPress",value:function(e){e.style.boxShadow="-2px -2px 12px 0 rgba(255,255,255,.5), 2px 2px 12px 0 rgba(0,0,0,.03)",e.style.fontSize="3.7em",e.style.color="grey",setTimeout((function(){e.style.boxShadow="-6px -6px 12px 0 rgba(255,255,255,.5), 12px 12px 12px 0 rgba(0,0,0,.03)",e.style.fontSize="4em",e.style.color="black"}),250)}},{key:"enter",value:function(e){var t=document.getElementById("entry"),n=document.getElementById(e);return this.styleBtnPress(n),B+=e.toString(),t.innerHTML+="*",this.checkComplete(),1}},{key:"render",value:function(){var e=this,t=this.state.opened;return r.a.createElement("div",{className:"outer"},!t&&this.WelcomePage(),t&&r.a.createElement("div",{id:"scr_2"},r.a.createElement("h1",{id:"entry",className:"entry"}),r.a.createElement("div",{className:"grid"},r.a.createElement("div",{className:"row"},r.a.createElement("button",{type:"button",className:"cell",id:"1",onClick:function(){return e.enter(1)}},"1"),r.a.createElement("button",{type:"button",className:"cell",id:"2",onClick:function(){return e.enter(2)}},"2"),r.a.createElement("button",{type:"button",className:"cell",id:"3",onClick:function(){return e.enter(3)}},"3")),r.a.createElement("div",{className:"row"},r.a.createElement("button",{type:"button",className:"cell",id:"4",onClick:function(){return e.enter(4)}},"4"),r.a.createElement("button",{type:"button",className:"cell",id:"5",onClick:function(){return e.enter(5)}},"5"),r.a.createElement("button",{type:"button",className:"cell",id:"6",onClick:function(){return e.enter(6)}},"6")),r.a.createElement("div",{className:"row"},r.a.createElement("button",{type:"button",className:"cell",id:"7",onClick:function(){return e.enter(7)}},"7"),r.a.createElement("button",{type:"button",className:"cell",id:"8",onClick:function(){return e.enter(8)}},"8"),r.a.createElement("button",{type:"button",className:"cell",id:"9",onClick:function(){return e.enter(9)}},"9")),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"cell hidden"}),r.a.createElement("button",{type:"button",className:"cell",id:"0",onClick:function(){return e.enter(0)}},"0"),r.a.createElement("button",{type:"button",className:"cell",id:"clr",onClick:this.clr},"Clear")))))}}]),n}(r.a.Component),D=n(65),P=n.n(D),_=n(67),z=n.n(_),U=(n(128),function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(e){var a;Object(c.a)(this,n),(a=t.call(this,e)).handleScan=function(e){var t=a.state.result,n=a.props,r=n.register,s=n.socket;if(e&&t!==e){a.setState({result:e});var l=e.indexOf(":"),c=e.slice(0,l),o=e.slice(l+1),i=r?1:0;s.emit("qrchannel",c,o,i),setTimeout((function(){a.setState({result:"No result"})}),5e3)}};var r=a.props.username,s=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);return a.state={result:"No result",code:"".concat(r,":").concat(s)},a.registerQR=a.registerQR.bind(Object(i.a)(a)),a}return Object(o.a)(n,[{key:"registerQR",value:function(){var e=this.state.code,t=this.props.socket,n=e.indexOf(":"),a=e.slice(0,n),r=e.slice(n+1);t.emit("qrchannel",a,r,1)}},{key:"render",value:function(){var e=this.state,t=e.code,n=e.result,a=this.props.register;return r.a.createElement(r.a.Fragment,null,a&&r.a.createElement("div",{className:"QRcontainer"},r.a.createElement(z.a,{style:{margin:"10% auto 5% auto",width:"50vh",maxWidth:"50%",height:"50%"},value:t}),r.a.createElement("h2",{style:{marginBottom:"3%"}},"Save this QR and continue"),r.a.createElement(y.a,{className:"clickable",onClick:this.registerQR,size:48})),!a&&r.a.createElement("div",{style:{height:"90%",display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center"}},"No result"===n&&r.a.createElement("h1",{style:{fontSize:"4em"}},"Scan your QR Code"),"No result"!==n&&r.a.createElement("h1",{style:{fontSize:"4em"}},"QR scan has been received!"),r.a.createElement(P.a,{delay:300,onError:this.handleError,onScan:this.handleScan,style:{width:"40%"}})))}}]),n}(a.Component)),M=n(68),H=n(69),T=(n(129),new C.a),A=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).toggleRecording=function(){a.setState({record:!a.state.record});var e=document.getElementById("play");e.style.boxShadow="-2px -2px 12px 0 rgba(255,255,255,.5), 2px 2px 12px 0 rgba(0,0,0,.03)",e.style.fontSize="3.7em",e.style.color="grey",setTimeout((function(){e.style.boxShadow="-6px -6px 12px 0 rgba(255,255,255,.5), 12px 12px 12px 0 rgba(0,0,0,.03)",e.style.fontSize="4em",e.style.color="black"}),250)},a.update_cookie=function(e){e.preventDefault();var t=document.getElementById("i_username").value;T.set("username",t),a.togglescreen()},a.state={record:!1,opened:a.props.register},a.onStop=a.onStop.bind(Object(i.a)(a)),a}return Object(o.a)(n,[{key:"togglescreen",value:function(){var e=this.state.opened;this.setState({opened:!e})}},{key:"onStop",value:function(e){console.log("recordedBlob is: ",e);var t=this.props.register?1:0;this.props.socket.emit("voiceChannel",T.get("username"),e.blob,t)}},{key:"WelcomePage",value:function(){return r.a.createElement("div",{id:"scr_1"},r.a.createElement("div",{className:"centered",id:"welcome"},r.a.createElement("div",{className:"window"},r.a.createElement("div",{className:"w_header"},r.a.createElement("h1",null,"Howdy!")),r.a.createElement("div",{className:"w_content"},r.a.createElement("h2",null,"Please enter your username:"),r.a.createElement("form",{onSubmit:this.update_cookie},r.a.createElement("input",{id:"i_username",type:"text",name:"username",autoFocus:!0}))))))}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,!this.state.opened&&this.WelcomePage(),this.state.opened&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"buttonsBar",style:{height:"100%",width:"100%",justifyContent:"center",alignItems:"center",position:"absolute",display:"flex"}},r.a.createElement("button",{id:"play",onClick:this.toggleRecording,className:"start play-stop",type:"button"},!this.state.record&&r.a.createElement(k.b.Provider,{value:{color:"#CC0004",size:"15vw",className:"record-button"}},r.a.createElement(H.a,null)),this.state.record&&r.a.createElement(k.b.Provider,{value:{color:"#999",size:"10vw"}},r.a.createElement(y.e,null)))),r.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"flex-end",alignItems:"center",height:"100%"}},r.a.createElement(M.ReactMic,{record:this.state.record,visualSetting:"frequencyBars",className:"sound-wave",onStop:this.onStop,strokeColor:"#000000",backgroundColor:"#EEEEEE"}))))}}]),n}(a.Component),Q=(n(21),n(36)),q=n.n(Q),F=n(70),W=(n(75),n(71));function L(){return(L=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function J(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},s=Object.keys(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var K=r.a.createElement("path",{id:"Selection",d:"M 287.00,316.50            C 287.00,316.50 443.75,299.50 443.75,299.50              443.75,299.50 452.00,199.00 452.00,199.00              452.00,199.00 440.67,165.67 420.10,150.78              426.07,153.07 450.39,158.13 450.39,158.13              442.15,134.38 425.63,107.60 408.83,89.00              408.83,89.00 389.00,69.09 389.00,69.09              384.84,65.21 380.67,62.44 377.00,58.00              377.00,58.00 389.00,57.00 389.00,57.00              379.58,49.34 366.47,44.49 355.00,40.67              338.71,35.24 321.93,31.43 305.00,28.59              296.54,27.17 286.47,25.08 278.00,25.00              278.00,25.00 286.00,18.00 286.00,18.00              286.00,18.00 254.00,14.09 254.00,14.09              254.00,14.09 223.00,12.00 223.00,12.00              223.00,12.00 237.00,1.00 237.00,1.00              237.00,1.00 210.00,5.40 210.00,5.40              165.81,14.25 131.57,30.77 102.14,66.00              98.09,70.85 93.52,77.65 92.48,84.00              91.29,91.22 95.85,94.34 88.94,100.54              88.94,100.54 58.00,121.72 58.00,121.72              35.66,137.33 9.97,160.73 2.75,188.00              -0.21,199.20 1.78,200.03 2.00,210.00              -1.85,211.37 56.31,166.19 99.62,150.75              99.62,150.75 99.88,152.38 99.88,152.38              95.59,144.41 1.30,207.67 2.62,210.12              2.62,210.12 21.00,200.78 21.00,200.78              29.68,196.68 38.81,193.49 48.00,190.72              61.86,186.54 84.63,182.17 99.00,182.00              99.00,182.00 118.00,181.04 118.00,181.04              118.00,181.04 134.00,182.00 134.00,182.00              141.71,182.01 152.46,182.71 159.00,186.97              164.58,190.60 165.13,194.41 176.00,201.19              189.11,209.36 194.72,208.69 208.00,220.29              220.31,231.04 241.96,256.62 250.50,269.50              254.75,262.25 254.75,260.00 253.75,253.25              268.75,253.58 272.00,322.50 287.00,316.50 Z"}),V=function(e){var t=e.svgRef,n=e.title,a=J(e,["svgRef","title"]);return r.a.createElement("svg",L({viewBox:"0 0 452 316",ref:t},a),n?r.a.createElement("title",null,n):null,K)};r.a.forwardRef((function(e,t){return r.a.createElement(V,L({svgRef:t},e))})),n.p,W.Keyframes.Spring(function(){var e=Object(F.a)(q.a.mark((function e(t){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,t({from:{strokeDashoffset:0},strokeDashoffset:1100,config:{mass:1,tension:70,friction:20,precision:.1}});case 3:return e.next=5,t({from:{strokeDashoffset:1100},strokeDashoffset:0,config:{mass:1,tension:50,friction:20,precision:.1}});case 5:e.next=0;break;case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var X=h()("https://".concat(window.location.hostname,":",3001),{secure:!0}),Z=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={dashboardState:null,registerUsername:"",numRegistered:0,registerMode:0,threshold:0,total:0,id:"none"},a.registerHandler=a.registerHandler.bind(Object(i.a)(a)),a.liftstate=a.liftstate.bind(Object(i.a)(a)),a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this;X.emit("SettingsUpdate"),X.on("SettingsUpdate",(function(t){e.setState(t)})),X.on("Register",(function(){var t=e.state,n=t.numRegistered;n>=t.total?e.setState({registerUsername:"",registerMode:0,numRegistered:0}):e.setState({numRegistered:n+1})}))}},{key:"liftstate",value:function(e){this.setState({dashboardState:e})}},{key:"Switch",value:function(){var e=this.state,t=e.id,n=e.registerMode,a=e.numRegistered,s=e.registerUsername,l=e.dashboardState,c=e.threshold,o=e.total;if(n)switch(a){case 1:return r.a.createElement(I,{register:"true"});case 2:return r.a.createElement(A,{register:"true",socket:X});case 3:return r.a.createElement(U,{username:s,register:"true",socket:X});default:return r.a.createElement("h1",null,"Attempted to register node type that does not exit")}else switch(t){case"auth":case"ui":return r.a.createElement(S,{savedState:l,liftState:this.liftstate,socket:X,registerHandler:this.registerHandler,threshold:parseInt(c,10),total:parseInt(o,10)});case"web":return r.a.createElement(I,null);case"qr":return r.a.createElement(U,{socket:X});case"voice":return r.a.createElement(A,{socket:X});default:return r.a.createElement("h1",null,"Unrecognized Node Type...")}}},{key:"registerHandler",value:function(e,t){this.setState({registerMode:1,registerUsername:e}),console.log("in register handler with",e,t),X.emit("Register",e,t)}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},this.Switch())}}]),n}(a.Component);Object(s.render)(r.a.createElement(l.a,null,r.a.createElement(Z,null)),document.getElementById("root"))},76:function(e,t,n){e.exports=n(145)},81:function(e,t,n){},83:function(e,t,n){}},[[76,1,2]]]);
//# sourceMappingURL=main.ac8387a8.chunk.js.map